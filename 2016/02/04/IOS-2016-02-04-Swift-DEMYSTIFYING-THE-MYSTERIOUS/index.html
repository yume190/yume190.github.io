<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="åŸæ–‡ï¼š
HIPSTER SWIFT: DEMYSTIFYING THE MYSTERIOUS">
    

    <!--Author-->
    
        <meta name="author" content="Yume">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Swift DEMYSTIFYING THE MYSTERIOUS"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Yume ç·´åŠŸåœ°"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Swift DEMYSTIFYING THE MYSTERIOUS - Yume ç·´åŠŸåœ°</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2016/02/04/IOS-2016-02-04-Swift-DEMYSTIFYING-THE-MYSTERIOUS/">
                Swift DEMYSTIFYING THE MYSTERIOUS
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2016-02-04</span>
            
            <a href="#disqus_thread" class="comments">Comments</a>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <p>åŸæ–‡ï¼š</p>
<p><a href="http://krakendev.io/blog/hipster-swift" target="_blank" rel="external">HIPSTER SWIFT: DEMYSTIFYING THE MYSTERIOUS</a></p>
<a id="more"></a>
<hr>
<p>æˆ‘çŸ¥é“æˆ‘ä¸æ˜¯å”¯ä¸€ä¸€å€‹æœ‰æ™‚çœ‹è‘— swiftï¼Œä¸¦è‡ªå·±æ€è€ƒèªªé€™æ˜¯å•¥é³¥æ±è¥¿çš„äººã€‚</p>
<p>Swift æœ‰å¾ˆå¤šçš„åŠŸèƒ½ï¼Œæœ‰å¾ˆå¤šäººä¸¦æ²’ä½¿ç”¨åˆ°ï¼Œä½†æˆ‘çŸ¥é“æœ‰ä¸€å¤©æˆ‘å¾—é¢å°é€™è©­ç•°çš„æ±è¥¿ä¸¦äº†è§£ä»–ã€‚</p>
<p>ä½ å¯èƒ½ç„¡æ³•å¾é€™ç¯‡æ–‡ç« ä¸­ï¼Œæ‰¾åˆ°ä½ æ—¥å¸¸éœ€è¦ç‰¹åˆ¥æœ‰ç”¨çš„æ±è¥¿ï¼Œä½†èª°åœ¨ä¹å‹’ï¼Ÿ</p>
<p>æˆ‘ç¢ºå®šæœƒæœ‰äººå–œæ­¡ä»–ã€‚</p>
<p>Personally, Iâ€™ll be using this post as a quick reference to the hipster stuff you see in Swift sometimes.<br>Personally, æˆ‘å°‡æœƒä»¥ä¸€å€‹å¿«é€Ÿåƒè€ƒ(reference)</p>
<hr>
<p>ç¾åœ¨ï¼Œé€™ç¯‡ poæ–‡ æœƒæœ‰é»é•·åº¦ï¼Œä½†å¾ˆæ£’çš„åœ°æ–¹æ˜¯ï¼Œä½ ä¸å¿…ä¸€ç¯‡æ¥è‘—ä¸€ç¯‡çš„çœ‹ï¼Œæ¯å€‹å°ç¯€å„è‡ªæœ‰ä»–çš„æ±è¥¿ï¼Œæ‰€ä»¥ç›¡æƒ…ç•¥éå»çœ‹ä¸‹ä¸€ç¯€ã€‚</p>
<p>here is a link to each part of this post in case youâ€™re a know-it-all and already know most of what I already wrote about:<br>ç‚ºäº†ä½ çš„æ–¹ä¾¿ï¼Œé€™è£¡æœ‰åˆ°å„å€‹</p>
<p><a name="MYSTERIOUS_TOP"></a></p>
<ul>
<li><a href="#noescape">@noescape</a></li>
<li><a href="#autoclosure">@autoclosure</a></li>
<li><a href="#InlineLazy">Inline Lazy Vars</a></li>
<li><a href="#Currying">()() AKA Currying (RIP ğŸ‘»)</a></li>
<li><a href="#Variadic">Variadic Parameters (or that weird â€¦ thing)</a></li>
<li><a href="#dynamic">The â€œdynamicâ€ keyword</a></li>
<li><a href="#SpecialLiterals">Special Literals</a></li>
<li><a href="#LoopLabels">Loop Labels (bet you donâ€™t know this one)</a></li>
</ul>
<hr>
<h2 id="NOESCAPE"><a href="#NOESCAPE" class="headerlink" title="@NOESCAPE"></a><a name="noescape"></a>@NOESCAPE</h2><p>é€™å°ç©æ„ä¼¼ä¹å¾ Swift å†’å‡ºäº†è’¸æ°£ã€‚</p>
<p>åœ¨æˆ‘äº†è§£ä»–ä¹‹å‰ï¼Œæ¯ä¸€æ¬¡çœ‹åˆ°ä»–ï¼Œæˆ‘çš„çœ¼ç›ç«‹å³è¢«é–ƒäº†ä¸€ä¸‹ã€‚</p>
<p>æˆ‘å‘Šè¨´æˆ‘è‡ªå·±é€™äº›æ˜¯ Robå¤§ç¥(@rob_rix and @cocoaphony) çš„å·¥å…·</p>
<p>ä½†ä»–åˆ°åº•æ˜¯ä»€éº¼å•Šï¼Ÿ åŸä¾†ï¼Œä»–é¦¬è©²æ­»ä½æœ‰ç”¨</p>
<p>ä»–æ˜¯å€‹ <code>Swift attribute</code>ï¼Œé™„åœ¨åƒæ•¸(é€™å€‹åƒæ•¸æ˜¯å€‹ function)ä¸Šï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">prepareTheKrakenArmyForBattle</span><span class="params">(@noescape preparations: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="comment">//Make the preparations to consume the human race.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»–åŸºæœ¬ä¸Šå‘Šè¨´ compilerï¼Œä¸Ÿé€²å»çš„ closure ä¸èƒ½å† function å¤–ä½¿ç”¨ã€‚</p>
<p>å› ç‚º <code>closures</code> æ˜¯ Swift çš„ç¬¬ä¸€å…¬æ°‘ï¼Œä½ èƒ½å¤ æŠŠ <code>closures</code> ä¸Ÿé€²è®Šæ•¸ï¼Œä¸¦åœ¨ä»»ä½• åœ°é»/æ™‚é–“ ä½¿ç”¨å®ƒã€‚</p>
<p>è—‰ç”±å° <code>closure</code> æ¨™ç¤º <code>@noescape</code>ï¼Œä½ å‘Šè¨´ compilerï¼Œç­‰ç­‰ä¸Ÿé€²å»çš„ closure å°‡è¢«åŸ·è¡Œæˆ– torn down within the body of that function and nowhere else.</p>
<p>ç”¨ç°¡å–®çš„æ–¹å¼ç†è§£çš„è©±ï¼Œå¤§æ¦‚å°±æ˜¯æŠŠ function å€å¡Šçœ‹ä½œæ˜¯å€‹ç›£ç„ï¼Œä¸” closure æœƒè¢«å›°åœ¨è£¡é¢ç„¡æ³•é€ƒè„«ã€‚</p>
<p>é€™é‚Šæœ‰å€‹å¤§åœ–ï¼Œå±•ç¤º closure è©¦åœ–é€ƒè„«(å¦‚ä½ æ‰€è¦‹ï¼Œthe Swift compiler is having none of it.)ï¼š</p>
<p><img src="http://static1.squarespace.com/static/5592eb03e4b051859f0b377f/t/569c91ae40667a727eeb8ecf/1453101487649/?format=2500w" alt=""></p>
<p>ç”¨ @noescape é‚„æœ‰ä¸€å€‹å¾ˆæ£’åŠ åˆ†çš„åœ°æ–¹æ˜¯ï¼Œ</p>
<p>compiler æœƒé€²ä¸€æ­¥å„ªåŒ–å¦³çš„ non-escaping code</p>
<p>å¦ä¸€å€‹å¾ˆæ£’åŠ åˆ†çš„åœ°æ–¹æ˜¯ï¼Œåœ¨ non escaping closure è£¡ï¼Œä½ ä¸å¿…é¡¯å¼æ•æ‰ <code>self</code>(weak æˆ– å…¶ä»–)ã€‚<br>Since the non-escaping closure will be executed or torn down by the end of the function that its a parameter of,<br>there is no need to mess with capture semantics for that closure.<br>This allows for awesome code that looks like this:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Kraken</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KrakenGeneral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> soldiers = [<span class="type">Kraken</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">startTheWar</span><span class="params">()</span></span> &#123;</span><br><span class="line">        prepareTheKrakenArmyForBattle(punishments: &#123;</span><br><span class="line">            soldiers.removeFirst() <span class="comment">//notice that we don't need self here.</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">prepareTheKrakenArmyForBattle</span><span class="params">(@noescape punishments punishments: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> someoneReportedMisbehavior &#123;</span><br><span class="line">            <span class="comment">//Someone was misbehaving. Helping out the humans. We can't have that now.</span></span><br><span class="line">            punishments()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="#MYSTERIOUS_TOP">TOP</a></p>
<hr>
<h2 id="AUTOCLOSURE"><a href="#AUTOCLOSURE" class="headerlink" title="@AUTOCLOSURE"></a><a name="autoclosure"></a>@AUTOCLOSURE</h2><p>@autoclosure æ˜¯å¦ä¸€å€‹ä½ å¯èƒ½çœ‹éå»ç„¡æ³•ç†è§£çš„ <code>Swift attribute</code></p>
<p>ä»–è »é¡ä¼¼æ–¼ <code>@noescape attribute</code>.</p>
<p>é¦–å…ˆï¼Œä»–åªèƒ½ç”¨åœ¨ <code>closure parameters</code>ï¼Œä¸”ä»–æœƒè‡ªå‹•é™„ä¸Š @noescapeã€‚</p>
<p><code>@autoclosure attribute</code> æœƒå»¶é²é‚£äº›å·²æ¿€æ´»çš„ <code>function parameter</code> çš„åŸ·è¡Œ</p>
<p>åŸºæœ¬ä¸Šï¼Œåœ¨åƒæ•¸è£¡å‘¼å«å‡½æ•¸å°‡æœƒæŠŠé€™æ®µ function call åŒ…é€² closureï¼Œfor later use in the function body.</p>
<p>èˆ‰ä¾‹èªªï¼Œä½ æœƒçœ‹åˆ°å¾ˆå¤šåƒé€™æ¨£çš„ code ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">krakenGeneral.punishSoldier(soldiers.removeFirst())</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">punishSoldier</span><span class="params">(soldier: Kraken)</span></span> &#123;</span><br><span class="line">    throwSoldierInTheBrig(soldier)</span><br><span class="line">    sendSoldierHomeToMommy(soldier)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€™é‚Šï¼Œç•¶ krakenGeneral å‘¼å« <code>punishSoldier()</code>ï¼ŒremoveFirst() æœƒè¢«åŸ·è¡Œã€‚</p>
<p>é€™ç«‹å³å¾ soldiers ç§»é™¤ç¬¬ä¸€å€‹å£«å…µï¼Œä¸”å›å‚³å‰›å‰›é‚£å€‹å£«å…µï¼Œä¸¦ç•¶ä½œåƒæ•¸å†å‚³å…¥ã€‚</p>
<p>æ¥è‘—ï¼Œä½ æœƒå°é•è¦çš„ kraken soldier åšäº›äº‹ã€‚</p>
<p>But what if you dont want the first soldier to be removed until later?<br>ä½†å¦‚æœä½ ä¸æƒ³é¦¬ä¸Šç§»é™¤ç¬¬ä¸€å€‹å£«å…µå‘¢ï¼Ÿ</p>
<p>å¦‚æœä½ æ˜¯å€‹æœ‰åŒæƒ…å¿ƒçš„ Kraken Officer?</p>
<p>å¦‚æœä½ æƒ³è¦å°é‚£ä½å¯æ†çš„å‚¢ä¼™å†é€ä»–å›å»è¦‹ä»–åª½ä¹‹å‰ï¼Œå†çµ¦ä»–ä¸€æ¬¡æ©Ÿæœƒï¼Ÿ</p>
<hr>
<p>å›åˆ° @autoclosure ä¸»é¡Œã€‚</p>
<p>å› ç‚º @autoclosure æœƒæŠŠä¸Ÿé€²å»çš„åƒæ•¸åŒ…é€² closureï¼Œæˆ‘å€‘èƒ½å»¶å¾Œç§»é™¤å£«å…µç›´åˆ°æˆ‘å€‘èªç‚ºæœ€å¥½ punishSoldier() å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//The removeFirst() function won't get called here.</span></span><br><span class="line">punishSoldier(soldiers.removeFirst())</span><br><span class="line"></span><br><span class="line"><span class="comment">//@autoclosure can only be used on closure types. Let's match our parameter to the removeFirst() function type.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">punishSoldier</span><span class="params">(@autoclosure soldierPunishment: <span class="params">()</span></span></span> -&gt; <span class="type">Kraken</span>) &#123;</span><br><span class="line">    <span class="comment">//Now we can decide when to remove our soldier.</span></span><br><span class="line">    <span class="keyword">if</span> someoneReportedMisbehavior &#123;</span><br><span class="line">        <span class="comment">//This will remove the soldier and send that soldier home.</span></span><br><span class="line">        sendSoldierHomeToMommy(soldierPunishment())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        apologizeToSoldierAndFeedHimAHuman()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>At a high level, ä¸Šè¿°çš„ code èˆ‡ä¸‹é¢çš„ code ç­‰åƒ¹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">punishSoldier &#123;</span><br><span class="line">    soldiers.removeFirst()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">punishSoldier</span><span class="params">(@noescape soldierPunishment: <span class="params">()</span></span></span> -&gt; <span class="type">Kraken</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> someoneReportedMisbehavior &#123;</span><br><span class="line">        <span class="comment">//This will remove the soldier and send that soldier home.</span></span><br><span class="line">        sendSoldierHomeToMommy(soldierPunishment())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        apologizeToSoldierAndFeedHimAHuman()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The main difference in syntax is at the call site.</p>
<p><code>@autoclosure attribute</code> ä¸å¸¸ä½¿ç”¨ï¼Œå› ç‚ºå®ƒæœƒè®“ä½ çš„ code å¯è®€æ€§é™ä½ã€‚</p>
<p>åœ¨ç¬¬ä¸€å€‹ç¯„ä¾‹ï¼Œå¦‚æœæˆ‘å€‘ä¸çŸ¥é“ <code>punishSoldier()</code> çš„å…§å®¹ï¼Œæˆ‘å€‘ä»ç„¶å‡è¨­ç¬¬ä¸€å€‹å£«å…µè¢«ç§»é™¤æ‰ã€‚</p>
<p>å› ç‚º @autoclosure æŠŠå®ƒéš±è—äº† closure parameter çš„å¯¦ä½œã€‚</p>
<p>éš±è—å¯¦ä½œé€šå¸¸çµ•ä¸æ˜¯å¥½æ±è¥¿ã€‚</p>
<p>å€‹äººä¾†èªª, æˆ‘æœƒå»ºè­°åå°ä½¿ç”¨å®ƒï¼Œé™¤éä»–å¯ä»¥èªªçš„é€šä»–åœ¨å¹¹éº»ã€‚</p>
<p>å…ˆå‰ï¼Œæˆ‘æåˆ° @autoclosure æœƒè‡ªå‹•æŠŠ closure è®Šæˆ non-escaping closureã€‚</p>
<p>å¦‚æœä½ åœ¨ä»€éº¼ç†ç”±ä¸‹ï¼ŒçœŸçš„æƒ³è¦ escape closureï¼Œä½ å¯ä»¥é™„ä¸Šé¡å¤–çš„å±¬æ€§çµ¦ @autoclosure å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> storageForAClosure: (() -&gt; <span class="type">Bool</span>)?</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">executeFunctionWithEscapableClosure</span><span class="params">(@autoclosure<span class="params">(escaping)</span></span></span> houdiniClosure: () -&gt; <span class="type">Bool</span>) &#123;</span><br><span class="line">    storageForAClosure = houdiniClosure</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">executeFunctionWithEscapableClosure(<span class="string">"kraken"</span>.hasPrefix(<span class="string">"k"</span>))</span><br><span class="line">storageForAClosure?() <span class="comment">//hasPrefix doesn't execute until this line of code</span></span><br></pre></td></tr></table></figure>
<p>By putting the keyword escaping inside of parentheses to the right of the @autoclosure attribute, you are telling the compiler that the closure parameter is an escaping closure.</p>
<p><a href="#MYSTERIOUS_TOP">TOP</a></p>
<hr>
<h2 id="INLINE-LAZY-VARS"><a href="#INLINE-LAZY-VARS" class="headerlink" title="INLINE LAZY VARS"></a><a name="InlineLazy"></a>INLINE LAZY VARS</h2><p>This may not be new to you guys but either way,<br>I feel this deserves a spot on the Hipster Swift board.<br>æˆ‘è¦ºå¾—é€™å€¼å¾— spot on the Hipster Swift board.</p>
<p>æˆ‘ç¢ºä¿¡æˆ‘å€‘éƒ½çŸ¥é“ä»€éº¼æ˜¯ lazy variableã€‚</p>
<p>å‡ä½¿ä½ ä¸çŸ¥é“çš„è©±, ä»–åŸºæœ¬ä¸Šæ˜¯å€‹ instance variable ä»–åªæœƒè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¸¦ä¸”åœ¨ä½ æ¯æ¬¡å­˜å–ä»–æ™‚å›å‚³çµ¦ä½  one-time-initialization valueã€‚</p>
<p>é€™å°è¨ˆç®—æ•æ„Ÿçš„å€¼æˆ–ç‰©ä»¶å»ºç«‹å¾Œæ‰èƒ½çŸ¥æ›‰çš„å±¬æ€§å€¼æ˜¯ç›¸ç•¶æœ‰ç”¨ä½ã€‚</p>
<p>å¤§å¤šæˆ‘å€‘å¯å»ºç«‹åƒé€™æ¨£çš„ lazy variablesï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KrakenFoodGenerator</span> </span>&#123;</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> lazyHuman: <span class="type">Human</span> = &#123;</span><br><span class="line">        <span class="comment">//We want a lazy human. Kraken's get annoyed</span></span><br><span class="line">        <span class="comment">//when they have to chase their food.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.generateWithOptions(.<span class="type">Lazy</span>)</span><br><span class="line">    &#125;()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift è®“ lazy initialization è®Šå¾—éå¸¸ç°¡å–®ï¼Œä½†æ˜¯ç•¶æˆ‘ç”¨ lazy variable ä»–ä½”æ“šç›¸ç•¶å¤šçš„ç©ºé–“è®“æˆ‘æœ‰é»ç…©æƒ±</p>
<p>Awesomely enough, the good Humans over on the Swift team thought of this for us.</p>
<p>æˆ‘å€‘å¯ä»¥å»ºç«‹ è¡Œå…§(inline) lazy vars ä¸”æ¸›å°‘ä¸Šè¿°çš„ codeï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KrakenFoodGenerator</span> </span>&#123;</span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> lazyHuman: <span class="type">Human</span> = <span class="keyword">self</span>.generateWithOptions(.<span class="type">Lazy</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†â€¦ ç­‰ç­‰â€¦ æœ‰é»æ€ªæ€ªçš„â€¦ æˆ‘å€‘åœ¨è®Šæ•¸ç”¨äº† <code>self</code> å®£å‘Šï¼</p>
<p>ä»–æ˜¯å“ªç¨® <code>self</code>? ä»–æœƒé€ æˆ retain cycle å—ï¼Ÿ</p>
<p>Lazy vars ç•¢ç«Ÿåªæ˜¯ closuresã€‚</p>
<p>ç‚ºä»€éº¼æˆ‘ä¸èƒ½åœ¨é™„ä¸Š lazy keyword ä½¿ç”¨ <code>self</code>?!</p>
<p>Well, I canâ€™t really tell you how thatâ€™s possible.<br>å—¯ï¼Œæˆ‘ä¸èƒ½ç¢ºå¯¦å‘Šè¨´ä½ ä»–æœƒç™¼ç”Ÿä»€éº¼äº‹ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨å¯«å®Œ autoclosure å°ç¯€å¾Œï¼Œæˆ‘èƒ½å¤§è†½çš„çŒœæ¸¬ã€‚</p>
<p>It seems as though anything after the equals sign of a lazy variable is automatically wrapped in a closure for us.<br>å°æˆ‘å€‘ä¾†èªª lazy variable å¥½åƒåœ¨ç­‰è™Ÿå¾Œé¢çš„æ‰€æœ‰æ±è¥¿æœƒè‡ªå‹•åŒ…é€² closureã€‚</p>
<p>As for the use of self, it seems as though it comes out unowned automatically for you.<br>è‡³æ–¼ä½¿ç”¨ <code>self</code>ï¼Œå°±å¥½åƒè‡ªå‹•ç”¨äº† <code>unowned</code></p>
<p>é€™é‚Šæœ‰åœ¨ playground çš„ä¸€å€‹å°æ¸¬è©¦ï¼Œå‘Šè¨´ä½ ä»–ä¸¦ä¸æœƒé€ æˆ retain cycleï¼š</p>
<p><img src="" alt=""></p>
<p>Cool, huh? Now you can go and shorten some code. Lord knows thatâ€™s exactly what Iâ€™m about to do.</p>
<p><a href="#MYSTERIOUS_TOP">TOP</a></p>
<hr>
<h2 id="AKA-CURRYING"><a href="#AKA-CURRYING" class="headerlink" title="()() - AKA CURRYING"></a><a name="Currying"></a>()() - AKA CURRYING</h2><p>ğŸ‘» RIP</p>
<p><a href="#MYSTERIOUS_TOP">TOP</a></p>
<hr>
<h2 id="THAT-WEIRD-ELLIPSE-THING-VARIADIC-PARAMETERS"><a href="#THAT-WEIRD-ELLIPSE-THING-VARIADIC-PARAMETERS" class="headerlink" title="THAT WEIRD ELLIPSE THING (VARIADIC PARAMETERS)"></a><a name="Variadic"></a>THAT WEIRD ELLIPSE THING (VARIADIC PARAMETERS)</h2><p>â€¦</p>
<p><a href="#MYSTERIOUS_TOP">TOP</a></p>
<hr>
<h2 id="DYNAMIC"><a href="#DYNAMIC" class="headerlink" title="DYNAMIC"></a><a name="dynamic"></a>DYNAMIC</h2><p><code>dynamic</code> æ˜¯å®£å‘Šç”¨ä¿®é£¾å­(declaration modifier)ï¼Œä½ é™„åœ¨ function æˆ– è®Šæ•¸ çš„å®£å‘Šä¸Šã€‚</p>
<p>You may see this when using libraries like NewRelic or something similar for app analytics.<br>ç•¶ä½¿ç”¨åƒ NewRelic Lib æˆ–é¡ä¼¼ app analytics ä½ å¯èƒ½æœƒçœ‹è¦‹ä»–å€‘çš„èº«å½±ã€‚</p>
<p>What dynamic does is tells the runtime to use dynamic dispatch over static dispatch for the function or variables modified.<br>dynamic å°±æ˜¯å‘Šè¨´ runtime å° function æˆ– è®Šæ•¸ ä½¿ç”¨ å‹•æ…‹æ´¾é€(dynamic dispatch) è€Œä¸æ˜¯ éœæ…‹æ´¾é€(static dispatch)</p>
<p>It also implicitly adds the @objc attribute to the variable or function declaration.<br>ä»–ä¹Ÿé¡¯å¼çš„åŠ å…¥ <code>@objc attribute</code> çµ¦è®Šæ•¸æˆ–å‡½æ•¸å®£å‘Šã€‚</p>
<p>ä½œç‚ºä¸€å€‹é‡è¦çš„æ³¨æ„äº‹é …ï¼Œæ‰€æœ‰ä½¿ç”¨ <code>dynamic</code> æœƒä»¥ <code>Objective-C runtime</code> è€Œä¸æ˜¯ä»¥ <code>Swift runtime</code> æ´¾é€ messagesã€‚</p>
<p>ç¾åœ¨ï¼Œæˆ‘å€‘æ„›éœæ…‹æ´¾é€ã€‚</p>
<p>ç„¶è€Œï¼Œapp åˆ†æä¸¦ä¸æ€éº¼å–œæ­¡ä»–ã€‚</p>
<p>Itâ€™s hard to generate and insert analytics code dynamically when functions are mostly static by default.<br>åœ¨é è¨­æƒ…æ³å‡½æ•¸å¤§å¤šæ˜¯éœæ…‹ï¼Œä»–å¾ˆé›£å‹•æ…‹ç”¢ç”Ÿè·Ÿæ’å…¥åˆ†æä»£ç¢¼ã€‚</p>
<p>Dynamic is useful for these situations but sacrifices optimizations we get from static dispatch.</p>
<p>dynamic ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Kraken</span> </span>&#123;</span><br><span class="line">    <span class="keyword">dynamic</span> <span class="keyword">var</span> imADynamicallyDispatchedString: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">dynamic</span> <span class="function"><span class="keyword">func</span> <span class="title">imADynamicallyDispatchedFunction</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//Hooray for dynamic dispatch!</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The other thing you get by using dynamic dispatch is better interoperability with things that use magic in the Objective-C runtime like Core Data that rely on KVC/KVO (think data bindings) at runtime. By using dynamic, you can take advantage of things we have long taken for granted in the Objective-C runtime. You know, just in case Swift wasnâ€™t cool enough for your needs. ğŸ˜</p>
<p>Basically, if you know that a certain function or property will be interfered/replaced/swizzled by someone at runtime, then itâ€™s a good idea to mark it dynamic. If you donâ€™t, you could get a crash from the compiler devirtualizing access/inlining implementations (this is an optimization you get for free) to your functions even though other code is trying to use runtime magic that doesnâ€™t play well with those optimizations.</p>
<p><a href="#MYSTERIOUS_TOP">TOP</a></p>
<hr>
<h2 id="SPECIAL-LITERALS-FILE-LINE-COLUMN-amp-FUNCTION"><a href="#SPECIAL-LITERALS-FILE-LINE-COLUMN-amp-FUNCTION" class="headerlink" title="SPECIAL LITERALS: FILE, LINE, COLUMN, &amp; FUNCTION"></a><a name="SpecialLiterals"></a>SPECIAL LITERALS: FILE, LINE, COLUMN, &amp; FUNCTION</h2><p>AKA Messrs <strong>FILE</strong>, <strong>LINE</strong>, <strong>COLUMN</strong>, &amp; <strong>FUNCTION</strong>. I think I may be blinded by the underscores.</p>
<p>Joking aside, these are actually pretty cool and when memorized, can save you a lot of time. They are called special literal expressions. Fairly self-explanatory if you ask me; however, I will try to shed some light on it anyways.</p>
<p>Much like numbers (and anything contained in quotes) are number and string literals, respectively, <strong>FILE</strong>, <strong>LINE</strong>, <strong>COLUMN</strong>, &amp; <strong>FUNCTION</strong> are also literals; as a result, they can be used like any normal literal. As for their return values, hereâ€™s a nifty table:</p>
<p><img src="" alt=""></p>
<p>Personally, my favorite one to use is the <strong>FUNCTION</strong> literal. Itâ€™s pretty useful for debugging purposes. For example, how many times have you asked yourself, â€œSelf? Can you tell me where the hell this function is getting called from? Itâ€™s not supposed to, you know. Thatâ€™s gotta be the bug Iâ€™m seeingâ€.</p>
<p>Well, worry no more! When placed as the default value of a parameter, the <strong>FUNCTION</strong> literal will print the name of the function that called through to the function itâ€™s a part of like so:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">wreakHavocOnHumanity</span><span class="params">(krakenArmy: [Kraken], callingFunction: String = <span class="keyword">__FUNCTION__</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">//There's a bug! There's too much havoc being wreaked!</span></span><br><span class="line">    <span class="comment">//Let's figure out who all is calling this function so we can</span></span><br><span class="line">    <span class="comment">//fix the bug! We absolutely need to make sure that the</span></span><br><span class="line">    <span class="comment">//appropriate amount of havoc be wreaked.</span></span><br><span class="line">    <span class="built_in">print</span>(callingFunction, <span class="string">"called \(__FUNCTION__)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">startTheWar</span><span class="params">()</span></span> &#123;</span><br><span class="line">    wreakHavocOnHumanity(krakenArmy)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">startEatingDinner</span><span class="params">(platter: Human)</span></span> &#123;</span><br><span class="line">    wreakHavocOnHumanity(krakenArmy)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">startTheWar() <span class="comment">//prints "startTheWar called wreakHavocOnHumanity"</span></span><br><span class="line">startEatingDinner(human) <span class="comment">//prints "startEatingDinner called wreakHavocOnHumanity"</span></span><br></pre></td></tr></table></figure>
<p><a href="#MYSTERIOUS_TOP">TOP</a></p>
<hr>
<h2 id="LOOP-LABELS-EXTENDING-BREAK-AND-CONTINUE"><a href="#LOOP-LABELS-EXTENDING-BREAK-AND-CONTINUE" class="headerlink" title="LOOP LABELS (EXTENDING BREAK AND CONTINUE)"></a><a name="LoopLabels"></a>LOOP LABELS (EXTENDING BREAK AND CONTINUE)</h2><p>Donâ€™t knock this one quite yet. At first look, you may be like, â€œDammit Hector. I know what breaks and continues are. Stop wasting my time.â€</p>
<p>Rudeness aside, Swift takes the break and continue keywords a step further and gives you the ability to label them. Sometimes, you may find that you have nested loop logic that kind of looks like this:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> section <span class="keyword">in</span> sections &#123;</span><br><span class="line">    <span class="keyword">var</span> foundTheMagicalRow = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> rows &#123;</span><br><span class="line">        <span class="keyword">if</span> row.isMagical &#123;</span><br><span class="line">            foundTheMagicalRow = <span class="literal">true</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> foundTheMagicalRow &#123;</span><br><span class="line">        <span class="comment">//We found the magical row!</span></span><br><span class="line">        <span class="comment">//No need to continue looping through our sections now.</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Using labels for your loops, you can shorten this code quite a bit. By using a label, you can indicate a specific loop to break or continue. Now here is some pretty code for you which is the exact same as the code above:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sectionLoop: <span class="keyword">for</span> section <span class="keyword">in</span> sections &#123;</span><br><span class="line">    rowLoop: <span class="keyword">for</span> row <span class="keyword">in</span> rows &#123;</span><br><span class="line">        <span class="keyword">if</span> row.isMagical &#123;</span><br><span class="line">            <span class="keyword">break</span> sectionLoop</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="#MYSTERIOUS_TOP">TOP</a></p>

    </div>

    

    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    å·¥ä½œæ™‚çš„ç­†è¨˜
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2017/03/07/WWDC-2016-416/">WWDC 2016 416</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/03/03/å»ºç«‹ç´”-swift-module/">å»ºç«‹ç´” swift module</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/03/02/Android-call-Swift-èˆŠç‰ˆ/">Android call Swift èˆŠç‰ˆ</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/02/22/LLVM-Build/">LLVM Build</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/IOS/Localize/">Localize</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/lua/">lua</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Android/Auto-Restart/">Auto-Restart</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Android/Custom-Permission/">Custom_Permission</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/yume190">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/yume190">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:yume190@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>