<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Common123//Let&#39;s import Mockito statically so that the code looks clearerimport static org.mockito.Mockito.*;import static org.mockito.BDDMockito.*;">
    

    <!--Author-->
    
        <meta name="author" content="Yume">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Mockito Practice"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Yume 練功地"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Mockito Practice - Yume 練功地</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2014/12/12/Testing-2014-12-12-Mockito-Practice/">
                Mockito Practice
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-12-12</span>
            
            <a href="#disqus_thread" class="comments">Comments</a>
            
                <span class="category">
                    <a href="/categories/Testing/">Testing</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <figure class="highlight java"><figcaption><span>Common</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Let's import Mockito statically so that the code looks clearer</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.mockito.Mockito.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.mockito.BDDMockito.*;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<hr>
<h2 id="Stub-類"><a href="#Stub-類" class="headerlink" title="Stub 類"></a>Stub 類</h2><ul>
<li>[2] How about some stubbing?</li>
<li>[5] Stubbing void methods with exceptionss</li>
<li>[10] Stubbing consecutive calls (iterator-style stubbing)</li>
<li>[11] Stubbing with callbacks</li>
<li>[12] doReturn()|doThrow()| doAnswer()|doNothing()|doCallRealMethod() family of methods</li>
<li>[16] Real partial mocks (Since 1.8.0)</li>
<li>[17] Changing default return values of unstubbed invocations (Since 1.7)</li>
<li>[18] Resetting mocks (Since 1.8.0)</li>
<li>[24] One-liner stubs (Since 1.9.0)</li>
</ul>
<h4 id="Stub-類說明"><a href="#Stub-類說明" class="headerlink" title="Stub 類說明"></a>Stub 類說明</h4><ul>
<li>[2] How about some stubbing?</li>
</ul>
<figure class="highlight java"><figcaption><span>How about some stubbing?</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//stubbing</span></span><br><span class="line">when(mockedList.get(<span class="number">0</span>)).thenReturn(<span class="string">"first"</span>);</span><br><span class="line">when(mockedList.get(<span class="number">1</span>)).thenThrow(<span class="keyword">new</span> RuntimeException());</span><br><span class="line"></span><br><span class="line"><span class="comment">//following prints "first"</span></span><br><span class="line">System.out.println(mockedList.get(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//following throws runtime exception</span></span><br><span class="line">System.out.println(mockedList.get(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//following prints "null" because get(999) was not stubbed</span></span><br><span class="line">System.out.println(mockedList.get(<span class="number">999</span>));</span><br></pre></td></tr></table></figure>
<ul>
<li>[5] Stubbing void methods with exceptionss</li>
</ul>
<figure class="highlight java"><figcaption><span>Stubbing void methods with exceptions</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">doThrow(<span class="keyword">new</span> RuntimeException()).when(mockedList).clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">//following throws RuntimeException:</span></span><br><span class="line">mockedList.clear();</span><br></pre></td></tr></table></figure>
<ul>
<li>[10] Stubbing consecutive calls (iterator-style stubbing)</li>
</ul>
<figure class="highlight java"><figcaption><span>Stubbing consecutive calls (iterator-style stubbing)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">when(mock.someMethod(<span class="string">"some arg"</span>))</span><br><span class="line">  .thenThrow(<span class="keyword">new</span> RuntimeException())</span><br><span class="line">  .thenReturn(<span class="string">"foo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//First call: throws runtime exception:</span></span><br><span class="line">mock.someMethod(<span class="string">"some arg"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Second call: prints "foo"</span></span><br><span class="line">System.out.println(mock.someMethod(<span class="string">"some arg"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//Any consecutive call: prints "foo" as well (last stubbing wins).</span></span><br><span class="line">System.out.println(mock.someMethod(<span class="string">"some arg"</span>));</span><br><span class="line"></span><br><span class="line">when(mock.someMethod()).thenReturn(<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>);</span><br><span class="line">assertEquals(<span class="string">"one"</span>,mock.someMethod());</span><br><span class="line">assertEquals(<span class="string">"two"</span>,mock.someMethod());</span><br><span class="line">assertEquals(<span class="string">"three"</span>,mock.someMethod());</span><br><span class="line">assertEquals(<span class="string">"three"</span>,mock.someMethod());</span><br><span class="line">assertEquals(<span class="string">"three"</span>,mock.someMethod());</span><br></pre></td></tr></table></figure>
<ul>
<li>[11] Stubbing with callbacks</li>
</ul>
<figure class="highlight java"><figcaption><span>Stubbing with callbacks</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">when(mock.someMethod(anyString())).thenAnswer(<span class="keyword">new</span> Answer() &#123;</span><br><span class="line">    <span class="function">Object <span class="title">answer</span><span class="params">(InvocationOnMock invocation)</span> </span>&#123;</span><br><span class="line">        Object[] args = invocation.getArguments();</span><br><span class="line">        Object mock = invocation.getMock();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"called with arguments: "</span> + args;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Following prints "called with arguments: foo"</span></span><br><span class="line">System.out.println(mock.someMethod(<span class="string">"foo"</span>));</span><br></pre></td></tr></table></figure>
<ul>
<li>[12] doReturn()|doThrow()| doAnswer()|doNothing()|doCallRealMethod() family of methods</li>
</ul>
<figure class="highlight java"><figcaption><span>doReturn()|doThrow()| doAnswer()|doNothing()|doCallRealMethod() family of methods</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">doThrow(<span class="keyword">new</span> RuntimeException()).when(mockedList).clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">//following throws RuntimeException:</span></span><br><span class="line">mockedList.clear();</span><br></pre></td></tr></table></figure>
<ul>
<li>[16] Real partial mocks (Since 1.8.0)</li>
</ul>
<figure class="highlight java"><figcaption><span>Real partial mocks (Since 1.8.0)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//you can create partial mock with spy() method:</span></span><br><span class="line">List list = spy(<span class="keyword">new</span> LinkedList());</span><br><span class="line"></span><br><span class="line"><span class="comment">//you can enable partial mock capabilities selectively on mocks:</span></span><br><span class="line">Foo mock = mock(Foo.class);</span><br><span class="line"><span class="comment">//Be sure the real implementation is 'safe'.</span></span><br><span class="line"><span class="comment">//If real implementation throws exceptions or depends on specific state of the object then you're in trouble.</span></span><br><span class="line">when(mock.someMethod()).thenCallRealMethod();</span><br></pre></td></tr></table></figure>
<ul>
<li>[17] Changing default return values of unstubbed invocations (Since 1.7)</li>
</ul>
<figure class="highlight java"><figcaption><span>Changing default return values of unstubbed invocations (Since 1.7)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Foo mock = mock(Foo.class, Mockito.RETURNS_SMART_NULLS);</span><br><span class="line">Foo mockTwo = mock(Foo.class, <span class="keyword">new</span> YourOwnAnswer());</span><br></pre></td></tr></table></figure>
<ul>
<li>[18] Resetting mocks (Since 1.8.0)</li>
</ul>
<figure class="highlight java"><figcaption><span>Resetting mocks (Since 1.8.0)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List mock = mock(List.class);</span><br><span class="line">when(mock.size()).thenReturn(<span class="number">10</span>);</span><br><span class="line">mock.add(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">reset(mock);</span><br><span class="line"><span class="comment">//at this point the mock forgot any interactions &amp; stubbing</span></span><br></pre></td></tr></table></figure>
<ul>
<li>[24] One-liner stubs (Since 1.9.0)</li>
</ul>
<figure class="highlight java"><figcaption><span>One-liner stubs (Since 1.9.0)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarTest</span> </span>&#123;</span><br><span class="line">  Car boringStubbedCar = when(mock(Car.class).shiftGear()).thenThrow(EngineNotStarted.class).getMock();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span> <span class="keyword">public</span> <span class="keyword">void</span> should... &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Matchers-類"><a href="#Matchers-類" class="headerlink" title="Matchers 類"></a>Matchers 類</h2><ul>
<li>[3] Argument matchers</li>
</ul>
<figure class="highlight java"><figcaption><span>Argument matchers</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//stubbing using built-in anyInt() argument matcher</span></span><br><span class="line">when(mockedList.get(anyInt())).thenReturn(<span class="string">"element"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//stubbing using hamcrest (let's say isValid() returns your own hamcrest matcher):</span></span><br><span class="line">when(mockedList.contains(argThat(isValid()))).thenReturn(<span class="string">"element"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//following prints "element"</span></span><br><span class="line">System.out.println(mockedList.get(<span class="number">999</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//you can also verify using an argument matcher</span></span><br><span class="line">verify(mockedList).get(anyInt());</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>如果使用 matcher 的話，每一個都必須用 matcher</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">verify(mock).someMethod(anyInt(), anyString(), eq(<span class="string">"third argument"</span>));</span><br><span class="line"><span class="comment">//above is correct - eq() is also an argument matcher</span></span><br><span class="line"></span><br><span class="line">verify(mock).someMethod(anyInt(), anyString(), <span class="string">"third argument"</span>);</span><br><span class="line"><span class="comment">//above is incorrect - exception will be thrown because third argument is given without an argument matcher.</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Verify-類"><a href="#Verify-類" class="headerlink" title="Verify 類"></a>Verify 類</h2><ul>
<li>[1] Let’s verify some behaviour!</li>
<li>[4] Verifying exact number of invocations / at least x / never</li>
<li>[6] Verification in order(驗證操作順序)</li>
<li>[7] Making sure interaction(s) never happened on mock(驗證無任何互動)</li>
<li>[8] Finding redundant invocations(驗證所有互動是否皆驗證到)</li>
<li>[15] Capturing arguments for further assertions (Since 1.8.0)</li>
<li>[22] Verification with timeout (Since 1.8.5)</li>
<li>[25] <del>Verification ignoring stubs (Since 1.9.0)</del></li>
</ul>
<h4 id="Verify-類說明"><a href="#Verify-類說明" class="headerlink" title="Verify 類說明"></a>Verify 類說明</h4><ul>
<li>[1] Let’s verify some behaviour!</li>
</ul>
<figure class="highlight java"><figcaption><span>Let's verify some behaviour!</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mock creation</span></span><br><span class="line">List mockedList = mock(List.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">//using mock object</span></span><br><span class="line">mockedList.add(<span class="string">"one"</span>);</span><br><span class="line">mockedList.clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">//verification</span></span><br><span class="line">verify(mockedList).add(<span class="string">"one"</span>);</span><br><span class="line">verify(mockedList).clear();</span><br></pre></td></tr></table></figure>
<ul>
<li>[4] Verifying exact number of invocations / at least x / never</li>
</ul>
<figure class="highlight java"><figcaption><span>Verifying exact number of invocations / at least x / never</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//using mock</span></span><br><span class="line">mockedList.add(<span class="string">"once"</span>);</span><br><span class="line"></span><br><span class="line">mockedList.add(<span class="string">"twice"</span>);</span><br><span class="line">mockedList.add(<span class="string">"twice"</span>);</span><br><span class="line"></span><br><span class="line">mockedList.add(<span class="string">"three times"</span>);</span><br><span class="line">mockedList.add(<span class="string">"three times"</span>);</span><br><span class="line">mockedList.add(<span class="string">"three times"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//following two verifications work exactly the same - times(1) is used by default</span></span><br><span class="line">verify(mockedList).add(<span class="string">"once"</span>);</span><br><span class="line">verify(mockedList, times(<span class="number">1</span>)).add(<span class="string">"once"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//exact number of invocations verification</span></span><br><span class="line">verify(mockedList, times(<span class="number">2</span>)).add(<span class="string">"twice"</span>);</span><br><span class="line">verify(mockedList, times(<span class="number">3</span>)).add(<span class="string">"three times"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//verification using never(). never() is an alias to times(0)</span></span><br><span class="line">verify(mockedList, never()).add(<span class="string">"never happened"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//verification using atLeast()/atMost()</span></span><br><span class="line">verify(mockedList, atLeastOnce()).add(<span class="string">"once"</span>);</span><br><span class="line">verify(mockedList, atLeast(<span class="number">2</span>)).add(<span class="string">"twice"</span>);</span><br><span class="line">verify(mockedList, atMost(<span class="number">5</span>)).add(<span class="string">"three times"</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>[6] Verification in order(驗證操作順序)</li>
</ul>
<figure class="highlight java"><figcaption><span>Verification in order</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A. Single mock whose methods must be invoked in a particular order</span></span><br><span class="line">List singleMock = mock(List.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">//using a single mock</span></span><br><span class="line">singleMock.add(<span class="string">"was added first"</span>);</span><br><span class="line">singleMock.add(<span class="string">"was added second"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//create an inOrder verifier for a single mock</span></span><br><span class="line">InOrder inOrder = inOrder(singleMock);</span><br><span class="line"></span><br><span class="line"><span class="comment">//following will make sure that add is first called with "was added first, then with "was added second"</span></span><br><span class="line">inOrder.verify(singleMock).add(<span class="string">"was added first"</span>);</span><br><span class="line">inOrder.verify(singleMock).add(<span class="string">"was added second"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// B. Multiple mocks that must be used in a particular order</span></span><br><span class="line">List firstMock = mock(List.class);</span><br><span class="line">List secondMock = mock(List.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">//using mocks</span></span><br><span class="line">firstMock.add(<span class="string">"was called first"</span>);</span><br><span class="line">secondMock.add(<span class="string">"was called second"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//create inOrder object passing any mocks that need to be verified in order</span></span><br><span class="line">InOrder inOrder = inOrder(firstMock, secondMock);</span><br><span class="line"></span><br><span class="line"><span class="comment">//following will make sure that firstMock was called before secondMock</span></span><br><span class="line">inOrder.verify(firstMock).add(<span class="string">"was called first"</span>);</span><br><span class="line">inOrder.verify(secondMock).add(<span class="string">"was called second"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Oh, and A + B can be mixed together at will</span></span><br></pre></td></tr></table></figure>
<ul>
<li>[7] Making sure interaction(s) never happened on mock(驗證無任何互動)</li>
</ul>
<figure class="highlight java"><figcaption><span>Making sure interaction(s) never happened on mock</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//using mocks - only mockOne is interacted</span></span><br><span class="line">mockOne.add(<span class="string">"one"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ordinary verification</span></span><br><span class="line">verify(mockOne).add(<span class="string">"one"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//verify that method was never called on a mock</span></span><br><span class="line">verify(mockOne, never()).add(<span class="string">"two"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//verify that other mocks were not interacted</span></span><br><span class="line">verifyZeroInteractions(mockTwo, mockThree);</span><br></pre></td></tr></table></figure>
<ul>
<li>[8] Finding redundant invocations(驗證所有互動是否皆驗證到)</li>
</ul>
<figure class="highlight java"><figcaption><span>Finding redundant invocations</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//using mocks</span></span><br><span class="line">mockedList.add(<span class="string">"one"</span>);</span><br><span class="line">mockedList.add(<span class="string">"two"</span>);</span><br><span class="line"></span><br><span class="line">verify(mockedList).add(<span class="string">"one"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//following verification will fail</span></span><br><span class="line">verifyNoMoreInteractions(mockedList);</span><br></pre></td></tr></table></figure>
<ul>
<li>[15] Capturing arguments for further assertions (Since 1.8.0)</li>
</ul>
<figure class="highlight java"><figcaption><span>Capturing arguments for further assertions (Since 1.8.0)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ArgumentCaptor&lt;Person&gt; argument = ArgumentCaptor.forClass(Person.class);</span><br><span class="line">mock.doSomething(mock);</span><br><span class="line">verify(mock).doSomething(argument.capture());</span><br><span class="line">assertEquals(mock, argument.getValue());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function">Person <span class="title">doSomething</span><span class="params">(Person abc)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> abc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>[22] Verification with timeout (Since 1.8.5)</li>
</ul>
<figure class="highlight java"><figcaption><span>Verification with timeout (Since 1.8.5)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//passes when someMethod() is called within given time span</span></span><br><span class="line">verify(mock, timeout(<span class="number">100</span>)).someMethod();</span><br><span class="line"><span class="comment">//above is an alias to:</span></span><br><span class="line">verify(mock, timeout(<span class="number">100</span>).times(<span class="number">1</span>)).someMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">//passes when someMethod() is called *exactly* 2 times within given time span</span></span><br><span class="line">verify(mock, timeout(<span class="number">100</span>).times(<span class="number">2</span>)).someMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">//passes when someMethod() is called *at least* 2 times within given time span</span></span><br><span class="line">verify(mock, timeout(<span class="number">100</span>).atLeast(<span class="number">2</span>)).someMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">//verifies someMethod() within given time span using given verification mode</span></span><br><span class="line"><span class="comment">//useful only if you have your own custom verification modes.</span></span><br><span class="line">verify(mock, <span class="keyword">new</span> Timeout(<span class="number">100</span>, yourOwnVerificationMode)).someMethod();</span><br></pre></td></tr></table></figure>
<ul>
<li>[25] <del>Verification ignoring stubs (Since 1.9.0)</del></li>
</ul>
<figure class="highlight java"><figcaption><span>Verification ignoring stubs (Since 1.9.0)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">verify(mock).foo();</span><br><span class="line">verify(mockTwo).bar();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ignores all stubbed methods:</span></span><br><span class="line">verifyNoMoreInvocations(ignoreStubs(mock, mockTwo));</span><br><span class="line"></span><br><span class="line"><span class="comment">//creates InOrder that will ignore stubbed</span></span><br><span class="line">InOrder inOrder = inOrder(ignoreStubs(mock, mockTwo));</span><br><span class="line">inOrder.verify(mock).foo();</span><br><span class="line">inOrder.verify(mockTwo).bar();</span><br><span class="line">inOrder.verifyNoMoreInteractions();</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="BDD"><a href="#BDD" class="headerlink" title="BDD"></a>BDD</h2><ul>
<li>[19] Aliases for behavior driven development (Since 1.8.0)</li>
<li>[29] (new) BDD style verification (Since 1.10.0)</li>
</ul>
<figure class="highlight java"><figcaption><span>Aliases for behavior driven development (Since 1.8.0)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.mockito.BDDMockito.*;</span><br><span class="line"></span><br><span class="line">Seller seller = mock(Seller.class);</span><br><span class="line">Shop shop = <span class="keyword">new</span> Shop(seller);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldBuyBread</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  given(seller.askForBread()).willReturn(<span class="keyword">new</span> Bread());</span><br><span class="line"></span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  Goods goods = shop.buyBread();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  assertThat(goods, containBread());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>(new) BDD style verification (Since 1.10.0)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">then(person).should(times(<span class="number">2</span>)).ride(bike);</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Mockito"><a href="#Mockito" class="headerlink" title="Mockito"></a>Mockito</h2><ul>
<li>[9] Shorthand for mocks creation - @Mock annotation</li>
<li>[13] Spying on real objects</li>
<li>[21] New annotations: @Captor, @Spy, @InjectMocks (Since 1.8.3)</li>
<li>[23] Automatic instantiation of @Spies, @InjectMocks and constructor injection goodness (Since 1.9.0)</li>
<li>[26] Mocking details (Since 1.9.5) (辨別物件是 mock or spy)</li>
<li>[30] (new) Spying or mocking abstract classes (Since 1.10.12)</li>
</ul>
<h4 id="Mockito-說明"><a href="#Mockito-說明" class="headerlink" title="Mockito 說明"></a>Mockito 說明</h4><ul>
<li>[9] Shorthand for mocks creation - @Mock annotation</li>
</ul>
<p>自動生成Mock類<br>在需要Mock的屬性上標記@Mock注解<br>然後@RunWith(MockitoJUnitRunner.class)<br>或者在setUp()方法中顯示調用MockitoAnnotations.initMocks(this);生成Mock類即可。</p>
<p><font color="red">Important!</font> This needs to be somewhere in the base class or a test runner:<br><figure class="highlight java"><figcaption><span>Shorthand for mocks creation - @Mock annotation</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArticleManagerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Mock</span> <span class="keyword">private</span> ArticleCalculator calculator;</span><br><span class="line">    <span class="meta">@Mock</span> <span class="keyword">private</span> ArticleDatabase database;</span><br><span class="line">    <span class="meta">@Mock</span> <span class="keyword">private</span> UserProvider userProvider;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArticleManager manager;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>[13] Spying on real objects</li>
</ul>
<figure class="highlight java"><figcaption><span>Spying on real objects</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> LinkedList();</span><br><span class="line">List spy = spy(list);</span><br><span class="line"></span><br><span class="line"><span class="comment">//optionally, you can stub out some methods:</span></span><br><span class="line">when(spy.size()).thenReturn(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//using the spy calls *real* methods</span></span><br><span class="line">spy.add(<span class="string">"one"</span>);</span><br><span class="line">spy.add(<span class="string">"two"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//prints "one" - the first element of a list</span></span><br><span class="line">System.out.println(spy.get(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//size() method was stubbed - 100 is printed</span></span><br><span class="line">System.out.println(spy.size());</span><br><span class="line"></span><br><span class="line"><span class="comment">//optionally, you can verify</span></span><br><span class="line">verify(spy).add(<span class="string">"one"</span>);</span><br><span class="line">verify(spy).add(<span class="string">"two"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>Let</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> LinkedList();</span><br><span class="line">List spy = spy(list);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Impossible: real method is called so spy.get(0) throws IndexOutOfBoundsException (the list is yet empty)</span></span><br><span class="line">when(spy.get(<span class="number">0</span>)).thenReturn(<span class="string">"foo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//You have to use doReturn() for stubbing</span></span><br><span class="line">doReturn(<span class="string">"foo"</span>).when(spy).get(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>[21] New annotations: @Captor, @Spy, @InjectMocks (Since 1.8.3)</p>
<ul>
<li>@Captor simplifies creation of ArgumentCaptor - useful when the argument to capture is a nasty generic class and you want to avoid compiler warnings</li>
<li>@Spy - you can use it instead spy(Object).</li>
<li>@InjectMocks - injects mock or spy fields into tested object automatically.</li>
</ul>
</li>
<li><p>[23] Automatic instantiation of @Spies, @InjectMocks and constructor injection goodness (Since 1.9.0)</p>
</li>
</ul>
<figure class="highlight java"><figcaption><span>Automatic instantiation of @Spies, @InjectMocks and constructor injection goodness (Since 1.9.0)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//instead:</span></span><br><span class="line"><span class="meta">@Spy</span> BeerDrinker drinker = <span class="keyword">new</span> BeerDrinker();</span><br><span class="line"><span class="comment">//you can write:</span></span><br><span class="line"><span class="meta">@Spy</span> BeerDrinker drinker;</span><br><span class="line"></span><br><span class="line"><span class="comment">//same applies to @InjectMocks annotation:</span></span><br><span class="line"><span class="meta">@InjectMocks</span> LocalPub;</span><br></pre></td></tr></table></figure>
<ul>
<li>[26] Mocking details (Since 1.9.5) (辨別物件是 mock or spy)</li>
</ul>
<figure class="highlight java"><figcaption><span>Mocking details (Since 1.9.5) (辨別物件是 mock or spy)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Mockito.mockingDetails(someObject).isMock();</span><br><span class="line">Mockito.mockingDetails(someObject).isSpy();</span><br></pre></td></tr></table></figure>
<ul>
<li>[30] (new) Spying or mocking abstract classes (Since 1.10.12)</li>
</ul>
<figure class="highlight java"><figcaption><span>(new) Spying or mocking abstract classes (Since 1.10.12)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//convenience API, new overloaded spy() method:</span></span><br><span class="line">SomeAbstract spy = spy(SomeAbstract.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Robust API, via settings builder:</span></span><br><span class="line">OtherAbstract spy = mock(OtherAbstract.class, withSettings()</span><br><span class="line">   .useConstructor().defaultAnswer(CALLS_REAL_METHODS));</span><br><span class="line"></span><br><span class="line"><span class="comment">//Mocking a non-static inner abstract class:</span></span><br><span class="line">InnerAbstract spy = mock(InnerAbstract.class, withSettings()</span><br><span class="line">   .useConstructor().outerInstance(outerInstance).defaultAnswer(CALLS_REAL_METHODS));</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h2><ul>
<li>[18] Troubleshooting &amp; validating framework usage (Since 1.8.0)</li>
<li>[20] Serializable mocks (Since 1.8.1)</li>
<li>[27] Delegate calls to real instance (Since 1.9.5)</li>
<li>[28] MockMaker API (Since 1.9.5)</li>
</ul>
<hr>
<h2 id="Practice"><a href="#Practice" class="headerlink" title="Practice"></a>Practice</h2><figure class="highlight java"><figcaption><span>mock reset practice</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">List mock = mock(List.class);</span><br><span class="line">mock.add(<span class="number">100</span>);</span><br><span class="line">verify(mock).add(<span class="number">100</span>);</span><br><span class="line">assertEquals(<span class="number">0</span>,mock.size());</span><br><span class="line"></span><br><span class="line">when(mock.size()).thenReturn(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">mock.add(<span class="number">101</span>);</span><br><span class="line">verify(mock).add(<span class="number">101</span>);</span><br><span class="line">verify(mock).add(<span class="number">101</span>);</span><br><span class="line">reset(mock);</span><br><span class="line"><span class="comment">//verify(mock).add(101);</span></span><br><span class="line">assertEquals(<span class="number">0</span>,mock.size());</span><br><span class="line">assertNull(mock.get(<span class="number">0</span>));</span><br><span class="line">assertNull(mock.get(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>spy reset practice</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">List spy = spy(<span class="keyword">new</span> LinkedList());</span><br><span class="line"></span><br><span class="line">spy.add(<span class="number">100</span>);</span><br><span class="line">verify(spy).add(<span class="number">100</span>);</span><br><span class="line">assertEquals(<span class="number">1</span>,spy.size());</span><br><span class="line"></span><br><span class="line">when(spy.size()).thenReturn(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">spy.add(<span class="number">101</span>);</span><br><span class="line">verify(spy).add(<span class="number">101</span>);</span><br><span class="line">verify(spy).add(<span class="number">101</span>);</span><br><span class="line">assertEquals(<span class="number">10</span>,spy.size());</span><br><span class="line">reset(spy);</span><br><span class="line"><span class="comment">//verify(spy).add(101);</span></span><br><span class="line">assertEquals(<span class="number">2</span>, spy.size());</span><br><span class="line">assertEquals(<span class="number">100</span>, spy.get(<span class="number">0</span>));</span><br><span class="line">assertEquals(<span class="number">101</span>, spy.get(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>isMock isSpy doCallRealMethod</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Person mock = mock(Person.class);</span><br><span class="line">Person spy = spy(<span class="keyword">new</span> Person());</span><br><span class="line"></span><br><span class="line">assertTrue(Mockito.mockingDetails(mock).isMock());</span><br><span class="line">assertTrue(Mockito.mockingDetails(spy).isSpy());</span><br><span class="line"></span><br><span class="line">assertNull(mock.someMethod());</span><br><span class="line">doCallRealMethod().when(mock).someMethod();</span><br><span class="line">assertEquals(<span class="string">"Yume"</span>,mock.someMethod());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">someMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Yume"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bar</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>@InjectMocks @Spy @Mock</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@InjectMocks</span> Person person = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="meta">@InjectMocks</span> Person person1 = mock(Person.class);</span><br><span class="line"><span class="meta">@InjectMocks</span> Person person2 = spy(<span class="keyword">new</span> Person());</span><br><span class="line"><span class="comment">//@InjectMocks @Spy Person person3;</span></span><br><span class="line"><span class="meta">@Spy</span> Person person4;</span><br><span class="line"><span class="meta">@Mock</span> Person person5;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Before</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    MockitoAnnotations.initMocks(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">assertEquals(<span class="string">"Yume"</span>, person.someMethod());</span><br><span class="line">assertNull(person1.someMethod());</span><br><span class="line">assertEquals(<span class="string">"Yume"</span>, person2.someMethod());</span><br><span class="line"></span><br><span class="line">assertEquals(<span class="string">"Yume"</span>, person4.someMethod());</span><br><span class="line">assertNull(person5.someMethod());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">someMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Yume"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bar</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>BDD</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">given(mock.someMethod()).willReturn(<span class="string">"Dream"</span>);</span><br><span class="line">assertEquals(<span class="string">"Dream"</span>, mock.someMethod());</span><br><span class="line">then(mock).should(times(<span class="number">1</span>)).someMethod();</span><br></pre></td></tr></table></figure>
    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/Android/">#Android</a> <a href="/tags/Testing/">#Testing</a> <a href="/tags/Mockito/">#Mockito</a>
        </div>
    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    工作時的筆記
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2017/03/07/WWDC-2016-416/">WWDC 2016 416</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/03/03/建立純-swift-module/">建立純 swift module</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/03/02/Android-call-Swift-舊版/">Android call Swift 舊版</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/02/22/LLVM-Build/">LLVM Build</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/IOS/Localize/">Localize</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/lua/">lua</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Android/Auto-Restart/">Auto-Restart</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Android/Custom-Permission/">Custom_Permission</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/yume190">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/yume190">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:yume190@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>