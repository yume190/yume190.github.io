<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="">
    

    <!--Author-->
    
        <meta name="author" content="Yume">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="一個成功的Git分支模型(心得)"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Yume 練功地"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>一個成功的Git分支模型(心得) - Yume 練功地</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2014/09/16/Git-2014-09-16-一個成功的Git分支模型-心得/">
                一個成功的Git分支模型(心得)
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2014-09-16</span>
            
            <a href="#disqus_thread" class="comments">Kommentare</a>
            
                <span class="category">
                    <a href="/categories/Git/">Git</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <p><img src="/image/git_model/git-branch-1.png" alt="成功的Git分支模型"></p>
<a id="more"></a>
<p><img src="/image/git_model/git-branch-2.png" alt="去中心化但仍保持中心化"></p>
<hr>
<h1 id="Main-Branch"><a href="#Main-Branch" class="headerlink" title="Main Branch"></a>Main Branch</h1><p><img src="/image/git_model/git-branch-3.png" alt="Main Branch"></p>
<p>最主要的兩個分支</p>
<ul>
<li>master (除非重大 bug，則會分出 hotfix 分支)</li>
<li>develop (用來在另外分支出 Release, feature)</li>
</ul>
<p><code>origin/master</code> 總是代表準備就緒的狀態 (always reflects a production-ready state.)<br><code>origin/develop</code> always reflects a state with the latest delivered development changes for the next release</p>
<p>當<code>develop branch</code>到達穩定且可被發布的狀態(stable point and is ready to be released) -&gt; 合併到<code>Master</code> -&gt; 標記(Tag)版本號</p>
<p>因此，每次有变化被合并到master分支时，根据定义这就是一次新的产品版本发布。我们趋向于严格遵守该规范，所以理论上来说，每次master有提交时，我们都可以使用一个<font color="red">Git钩子（hook）</font>脚本来自动构建并部署软件至产品环境服务器。</p>
<hr>
<h1 id="Supporting-branche"><a href="#Supporting-branche" class="headerlink" title="Supporting branche"></a>Supporting branche</h1><p>我們會用到的分支有這幾類：</p>
<ul>
<li>Feature branches (由 develop 直接分支，開發新功能)</li>
<li>Release branches (由 develop 直接分支，開發下一版 Release)</li>
<li>Hotfix branches (由 master 直接分支，馬上修正 bug)</li>
</ul>
<h2 id="Feature-branches"><a href="#Feature-branches" class="headerlink" title="Feature branches"></a>Feature branches</h2><p><img src="/image/git_model/git-branch-4.png" alt="合併feature回develop"></p>
<p>規定：</p>
<ul>
<li><font color="red">可能的分支來源：</font><font color="blue">develop</font></li>
<li><font color="red">必須合併至：</font><font color="blue">develop</font></li>
<li><font color="red">分支命名制約(naming convention)：</font><font color="blue">任何除master, develop, release-<em>, 或 hotfix-</em>以外的名稱</font>

</li>
</ul>
<p>特點：</p>
<ul>
<li>只要特性还在开发，该分支就会一直存在<ul>
<li>不过它最终会被合并回develop分支（将该特性加入到发布版本中）</li>
<li>被丢弃（如果试验的结果令人失望）</li>
</ul>
</li>
</ul>
<h3 id="Creating-a-feature-branch-创建一个特性分支"><a href="#Creating-a-feature-branch-创建一个特性分支" class="headerlink" title="Creating a feature branch (创建一个特性分支)"></a>Creating a feature branch (创建一个特性分支)</h3><p>開始開發新功能的時候，從develop分支創建功能分支。</p>
<pre><code>$ git checkout -b myfeature develop
</code></pre><h3 id="Incorporating-a-finished-feature-on-develop-合并完成的特性回develop"><a href="#Incorporating-a-finished-feature-on-develop-合并完成的特性回develop" class="headerlink" title="Incorporating a finished feature on develop (合并完成的特性回develop)"></a>Incorporating a finished feature on develop (合并完成的特性回develop)</h3><p>已完成的特性應該被合併回develop分支以将特性加入到下一个发布版本中：</p>
<pre><code>$ git checkout develop
# Switched to branch &apos;develop&apos;
$ git merge --no-ff myfeature
# Updating ea1b82a..05e9557
# (Summary of changes)
$ git branch -d myfeature
# Deleted branch myfeature (was 05e9557).
$ git push origin develop
</code></pre><h3 id="git-merge-no-ff-與-git-merge的差異"><a href="#git-merge-no-ff-與-git-merge的差異" class="headerlink" title="git merge --no-ff 與 git merge的差異"></a><code>git merge --no-ff</code> 與 <code>git merge</code>的差異</h3><p><img src="/image/git_model/git-branch-5.png" alt="git merge --no-ff &amp; git merge"></p>
<p><code>--no-ff</code>意思為no fast forward</p>
<p>原本會以為說merge會有明顯的分支，出去之後再回來</p>
<p>但是有一個例外狀況是</p>
<ul>
<li>master沒有新的commit</li>
<li>develop merge回master</li>
</ul>
<p>這種情形的合併會和rebase的<code>結果</code>一樣</p>
<p>所以為了要有分支之後在合併回來的狀態</p>
<p>就得下<code>git merge --no-ff</code></p>
<h3 id="為何選擇git-merge-no-ff"><a href="#為何選擇git-merge-no-ff" class="headerlink" title="為何選擇git merge --no-ff"></a>為何選擇<code>git merge --no-ff</code></h3><p>這裏我們想要凸顯出，在這個區域中，有feature被合併回來</p>
<p>即便他有多一個merge commit</p>
<h2 id="Release-branches"><a href="#Release-branches" class="headerlink" title="Release branches"></a>Release branches</h2><p>規定：</p>
<ul>
<li><font color="red">可能的分支來源：</font><font color="blue">develop</font></li>
<li><font color="red">必須合併至：</font><font color="blue">develop and master</font></li>
<li><font color="red">分支命名制約(naming convention)：</font><font color="blue">release-*</font>

</li>
</ul>
<h3 id="创建一个发布分支"><a href="#创建一个发布分支" class="headerlink" title="创建一个发布分支"></a>创建一个发布分支</h3><p>develop分支的状态已经是准备好“下一版本”发布了，我们也决定下个版本是1.2（而不是1.1.6或者2.0）。因此我们创建发布分支，并且为其赋予一个能体现新版本号的名称：<br>develop ready <code>next version</code> -&gt; Decide version(now 1.2) -&gt; Create Release branch(release-1.2)</p>
<pre><code>$ git checkout -b release-1.2 develop
# Switched to a new branch &quot;release-1.2&quot;
$ ./bump-version.sh 1.2
# Files modified successfully, version bumped to 1.2.
$ git commit -a -m &quot;Bumped version number to 1.2&quot;
# [release-1.2 74d9424] Bumped version number to 1.2
# 1 files changed, 1 insertions(+), 1 deletions(-)
</code></pre><p>新的发布分支可能存在一段时间，直到该版本明确对外交付。</p>
<ul>
<li>这段时间内，<font color="blue">该分支上可能会有一些bug的修复</font>（而不是在develop分支上）</li>
<li><font color="red">在该分支上添加新特性是严格禁止的。</font></li>
<li><font color="blue">新特性必须合并到develop分支，然后等待下一个版本发布。</font>

</li>
</ul>
<h3 id="结束一个发布分支"><a href="#结束一个发布分支" class="headerlink" title="结束一个发布分支"></a>结束一个发布分支</h3><p>合併release 回 master -&gt; 標上tag</p>
<pre><code>$ git checkout master
# Switched to branch &apos;master&apos;
$ git merge --no-ff release-1.2
# Merge made by recursive.
# (Summary of changes)
$ git tag -a 1.2
</code></pre><p>合併release 回 develop</p>
<pre><code>$ git checkout develop
Switched to branch &apos;develop&apos;
$ git merge --no-ff release-1.2
Merge made by recursive.
(Summary of changes)
</code></pre><p>最后一步是删除发布分支，因为我们已不再需要它：</p>
<pre><code>$ git branch -d release-1.2
# Deleted branch release-1.2 (was ff452fe).
</code></pre><h2 id="Hotfix-branches"><a href="#Hotfix-branches" class="headerlink" title="Hotfix branches"></a>Hotfix branches</h2><p><img src="/image/git_model/git-branch-6.png" alt="Hotfix branche"></p>
<p>規定：</p>
<ul>
<li><font color="red">可能的分支來源：</font><font color="blue">master</font></li>
<li><font color="red">必須合併至：</font><font color="blue">develop and master</font></li>
<li><font color="red">分支命名制約(naming convention)：</font><font color="blue">hotfix-*</font>

</li>
</ul>
<p>動作：</p>
<ul>
<li>建立hotfix branch -&gt; 修復bug(途中也許由多個commit) -&gt; 合併回master，並標上新tag &amp; 同時合併回develop</li>
</ul>
<p>例外狀況(如果這時候release分支存在的話)：</p>
<ul>
<li><font color="red">合併到release分支，而不是develop分支</font>

</li>
</ul>
<hr>
<p>Source：</p>
<ul>
<li><a href="http://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="external">A successful Git branching model</a></li>
<li><a href="http://blog.wu-boy.com/2011/03/git-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6-branch-model-%E5%88%86%E6%94%AF%E6%A8%A1%E7%B5%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%B4%B9/" target="_blank" rel="external">Git 版本控制 branch model 分支模組基本介紹</a></li>
<li><a href="http://www.juvenxu.com/2010/11/28/a-successful-git-branching-model/" target="_blank" rel="external">一个成功的Git分支模型</a></li>
</ul>
<p>a<br>H1<br>a<br>img<br>hr<br>li<br>table<br>**</p>
<hr>
<p>``<br>code<br>&gt;<br><br></p>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/Git/">#Git</a> <a href="/tags/版本控制/">#版本控制</a>
        </div>
    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    工作時的筆記
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2017/03/07/WWDC-2016-416/">WWDC 2016 416</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/03/03/建立純-swift-module/">建立純 swift module</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/03/02/Android-call-Swift-舊版/">Android call Swift 舊版</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/02/22/LLVM-Build/">LLVM Build</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/IOS/Localize/">Localize</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/lua/">lua</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Android/Auto-Restart/">Auto-Restart</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Android/Custom-Permission/">Custom_Permission</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/yume190">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/yume190">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:yume190@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>